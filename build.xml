<?xml version="1.0"?>

<!--****************************************************************************
**
**  ANODYNE OS - JSE
**
*****************************************************************************-->

<project name="anodyneos-jse" default="compile" basedir=".">

    <property file="build.properties"/>

    <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    ~~  common
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
    <import file="build.common.xml"/>

    <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    ~~  properties
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
    <property name="dir.src.sample"     location="src.sample"/>
    <property name="cronConfigFile"     location="${dir.src.sample}/cron.xml"/>

    <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    ~~  required jars
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
    <property name="anodyneos-commons.jar" location="${dir.jars}/anodyneos-commons-20050414.00/anodyneos-commons.jar"/>
    <property name="ojdbc14.jar" location="${dir.jars.commercial}/oracle-10.1.0.2.0/ojdbc14.jar"/>

    <property name="commons-logging.jar" location="${dir.jars}/commons-logging-1.0.3/commons-logging.jar"/>
    <property name="log4j-1.2.8.jar" location="${dir.jars}/jakarta-log4j-1.2.8/log4j-1.2.8.jar"/>

    <property name="xercesImpl.jar" location="${dir.jars}/xerces-2.6.0/xercesImpl.jar"/>
    <property name="xml-apis.jar" location="${dir.jars}/xerces-2.6.0/xml-apis.jar"/>
    <property name="mailapi.jar" location="${dir.jars.notfree}/javamail-1.3.1/mailapi.jar"/>
    <property name="mail.jar" location="${dir.jars.notfree}/javamail-1.3.1/mail.jar"/>
    <property name="smtp.jar" location="${dir.jars.notfree}/javamail-1.3.1/smtp.jar"/>
    <property name="activation.jar" location="${dir.jars.notfree}/jaf-1.0.2/activation.jar"/>

    <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    ~~  prepare.post
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
    <target name="prepare.post">
        <!-- ide.lib -->
        <copy toDir="${dir.build.ide.lib}" file="${anodyneos-commons.jar}"/>
        <copy toDir="${dir.build.ide.lib}" file="${ojdbc14.jar}"/>

        <copy toDir="${dir.build.ide.lib}" file="${commons-logging.jar}"/>
        <copy toDir="${dir.build.ide.lib}" file="${log4j-1.2.8.jar}"/>

        <copy toDir="${dir.build.ide.lib}" file="${xercesImpl.jar}"/>
        <copy toDir="${dir.build.ide.lib}" file="${xml-apis.jar}"/>
        <copy toDir="${dir.build.ide.lib}" file="${mailapi.jar}"/>
        <copy toDir="${dir.build.ide.lib}" file="${mail.jar}"/>
        <copy toDir="${dir.build.ide.lib}" file="${smtp.jar}"/>
        <copy toDir="${dir.build.ide.lib}" file="${activation.jar}"/>

        <!-- paths -->
        <path id="path.compile">
            <fileset id="fs.lib" dir="${dir.build.ide.lib}">
                <include name="*.jar"/>
            </fileset>
        </path>
    </target>

    <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    ~~  cronServer
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->

    <target name="cronServer" depends="compile" description="Run CronServer">
        <java taskname="run" fork="yes" classname="org.anodyneos.jse.cron.CronServer">
            <arg line="${cronConfigFile}"/>
            <sysproperty key="test.prop.22" value="22"/>
            <classpath refid="path.compile"/>
            <classpath location="${dir.build.classes}"/>
        </java>
    </target>

    <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    ~~  jseRunnerTest
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->

    <target name="jseRunnerTest" depends="compile" description="Run JseRunnerTest">
        <java taskname="run" fork="yes" classname="org.anodyneos.jse.JseRunnerTest">
            <classpath refid="path.compile"/>
            <classpath location="${dir.build.classes}"/>
        </java>
    </target>

    <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    ~~  cronScheduleTest
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->

    <target name="cronScheduleTest" depends="compile" description="Run CronScheduleTest">
        <java taskname="run" fork="yes" classname="org.anodyneos.jse.cron.CronScheduleTest">
            <classpath refid="path.compile"/>
            <classpath location="${dir.build.classes}"/>
        </java>
    </target>

</project>

